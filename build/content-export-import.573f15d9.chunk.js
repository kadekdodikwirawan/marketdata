"use strict";(self.webpackChunkmarketdata=self.webpackChunkmarketdata||[]).push([[7163],{31119:(e,t,a)=>{var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(53547)),l=n(a(78384)).default.pre.withConfig({displayName:"JsonDataDisplay__CodeWrapper",componentId:"sc-u36pwz-0"})(["margin:1.2rem 0;background:#efefef;height:20rem;line-height:2rem;overflow:scroll;width:100%;border-radius:.4rem;padding:1.2rem;white-space:pre-wrap;"]),u=function(e){var t=e.data;return r.default.createElement("div",null,r.default.createElement(l,null,JSON.stringify(t,null,4)))};t.default=u},96273:(e,t,a)=>{var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(53547)),l=a(29491),u=n(a(17908)),o=n(a(28700)),c=n(a(67773)),i=n(a(27880)),f=a(48599),d=function(){return r.default.createElement(l.SubNav,{ariaLabel:"Content Export & Import"},r.default.createElement(l.SubNavHeader,{label:"Content Export & Import"}),r.default.createElement(l.SubNavSections,null,r.default.createElement(l.SubNavLink,{to:(0,f.getUrl)(i.default,"export"),icon:r.default.createElement(o.default,null)},"Export"),r.default.createElement(l.SubNavLink,{to:(0,f.getUrl)(i.default,"import"),icon:r.default.createElement(u.default,null)},"Import"),r.default.createElement(l.SubNavLink,{to:(0,f.getUrl)(i.default,"utilities"),icon:r.default.createElement(c.default,null)},"Utilities")))};t.default=d},67941:(e,t,a)=>{var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(53547)),l=a(39711),u=a(39272),o=n(a(27880)),c=n(a(96273)),i=n(a(91667)),f=n(a(46568)),d=n(a(16237)),p=(n(a(38973)),function(){return r.default.createElement("div",null,r.default.createElement(u.Grid,null,r.default.createElement(u.GridItem,{col:3,padding:1},r.default.createElement(c.default,null)),r.default.createElement(u.GridItem,{col:9,padding:1},r.default.createElement(l.Switch,null,r.default.createElement(l.Route,{path:"/plugins/".concat(o.default,"/export"),component:i.default,exact:!0}),r.default.createElement(l.Route,{path:"/plugins/".concat(o.default,"/import"),component:f.default,exact:!0}),r.default.createElement(l.Route,{path:"/plugins/".concat(o.default,"/utilities"),component:d.default,exact:!0}),r.default.createElement(l.Redirect,{to:"/plugins/".concat(o.default,"/export")})))))});t.default=p},22474:(e,t,a)=>{var n=a(25108),r=a(95318),l=a(50008);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u=r(a(63038)),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==l(e)&&"function"!==typeof e)return{default:e};var a=E(t);if(a&&a.has(e))return a.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var o=r?Object.getOwnPropertyDescriptor(e,u):null;o&&(o.get||o.set)?Object.defineProperty(n,u,o):n[u]=e[u]}n.default=e,a&&a.set(e,n);return n}(a(53547)),c=a(64459),i=a(94117),f=a(33483),d=a(20779),p=a(40264),s=a(39272),m=a(43251),v=a(93162),y=a(62988),g=a(37863),h=r(a(31119));function E(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(E=function(e){return e?a:t})(e)}var b=function(e){var t=e.model,a=(0,o.useState)(!1),r=(0,u.default)(a,2),l=r[0],E=r[1],b=(0,o.useState)(null),O=(0,u.default)(b,2),j=O[0],w=O[1],P=(0,o.useState)(null),k=(0,u.default)(P,2),M=k[0],_=k[1],S=(0,o.useState)("json"),x=(0,u.default)(S,2),T=x[0],C=x[1],B=function(e){var t=new File([(0,g.convertToCsv)(j.data)],"".concat(e,".csv"),{type:"text/csv;charset=utf-8"});(0,v.saveAs)(t)},F=function(e){var t=new File([JSON.stringify(j)],"".concat(e,".json"),{type:"application/json;charset=utf-8"});(0,v.saveAs)(t)};return o.default.createElement(i.Box,{padding:4,margin:4,shadow:"filterShadow",hasRadius:!0,background:"neutral0"},M&&o.default.createElement(i.Box,{paddingBottom:4},o.default.createElement(d.Status,{variant:"success"},o.default.createElement(f.Typography,null,M))),o.default.createElement(s.Grid,{gap:4},o.default.createElement(s.GridItem,{col:7},o.default.createElement(f.Typography,{variant:"epsilon"},t.schema.displayName)),o.default.createElement(s.GridItem,{col:2},o.default.createElement(f.Typography,{id:"format-label",variant:"pi"},"Export format"),o.default.createElement(m.RadioGroup,{labelledBy:"format-label",onChange:function(e){return C(e.target.value)},value:T,name:"".concat(t.uid,"-format")},o.default.createElement(m.Radio,{value:"csv"},"csv"),o.default.createElement(m.Radio,{checked:"json"===T,value:"json"},"json"))),o.default.createElement(s.GridItem,{col:3},o.default.createElement(p.Flex,{justifyContent:"space-between"},o.default.createElement(c.Button,{disabled:l,loading:l,onClick:function(){return E(!0),(0,y.fetchAll)(t.uid).then((function(e){w(e)})).catch((function(e){n.error(e),_("Fetch content failed, please check console for details.")})).finally((function(){E(!1)}))},variant:"default"},l?"Fetching":"Fetch"),o.default.createElement(c.Button,{disabled:!j,onClick:function(){var e=new Date,a="".concat(t.apiID,"-").concat(e.getTime());"csv"===T?B(a):F(a)},variant:j?"tertiary":"secondary"},"Download")))),j&&o.default.createElement(h.default,{data:j}))};t.default=b},91667:(e,t,a)=>{var n=a(95318),r=a(50008);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=n(a(87757)),u=n(a(48926)),o=n(a(63038)),c=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!==typeof e)return{default:e};var a=v(t);if(a&&a.has(e))return a.get(e);var n={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var o=l?Object.getOwnPropertyDescriptor(e,u):null;o&&(o.get||o.set)?Object.defineProperty(n,u,o):n[u]=e[u]}n.default=e,a&&a.set(e,n);return n}(a(53547)),i=a(35395),f=a(9524),d=a(94117),p=a(33483),s=a(62988),m=n(a(22474));function v(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(v=function(e){return e?a:t})(e)}var y=function(){var e=(0,c.useState)([]),t=(0,o.default)(e,2),a=t[0],n=t[1];return(0,c.useEffect)((function(){function e(){return e=(0,u.default)(l.default.mark((function e(){var t;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,s.getModels)();case 2:t=e.sent,n(t);case 4:case"end":return e.stop()}}),e)}))),e.apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),c.default.createElement("div",null,c.default.createElement(i.BaseHeaderLayout,{title:"Export Content",subtitle:"Export content into JSON format",as:"h2"}),c.default.createElement(f.Stack,{size:4,padding:2},c.default.createElement(d.Box,{key:"title"},c.default.createElement(p.Typography,{variant:"beta"},"Content Types")),a.map((function(e){return c.default.createElement(m.default,{key:e.uid,model:e})}))))},g=(0,c.memo)(y);t.default=g},7094:(e,t,a)=>{var n=a(25108),r=a(95318),l=a(50008);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u=r(a(63038)),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==l(e)&&"function"!==typeof e)return{default:e};var a=b(t);if(a&&a.has(e))return a.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var o=r?Object.getOwnPropertyDescriptor(e,u):null;o&&(o.get||o.set)?Object.defineProperty(n,u,o):n[u]=e[u]}n.default=e,a&&a.set(e,n);return n}(a(53547)),c=a(2632),i=a(9524),f=a(94117),d=a(64459),p=a(20779),s=a(33483),m=a(36816),v=a(96486),y=a(54958),g=a(90384),h=r(a(31119)),E=a(82419);function b(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(b=function(e){return e?a:t})(e)}var O=function(e){var t=e.models,a=(0,v.map)(t,m.convertModelToOption),r=(0,o.useState)(!1),l=(0,u.default)(r,2),b=l[0],O=l[1],j=(0,o.useState)(void 0),w=(0,u.default)(j,2),P=w[0],k=w[1],M=(0,o.useState)(null),_=(0,u.default)(M,2),S=_[0],x=_[1],T=(0,o.useState)(null),C=(0,u.default)(T,2),B=C[0],F=C[1],D=(0,o.useState)(null),W=(0,u.default)(D,2),A=W[0],I=W[1],N=(0,o.useState)(null),R=(0,u.default)(N,2),L=R[0],U=R[1];(0,o.useEffect)((function(){!P&&t&&t.length>0&&k(t[0].uid)}),[t]);return o.default.createElement(i.Stack,{size:4,padding:4},o.default.createElement(f.Box,{padding:4,shadow:"filterShadow",hasRadius:!0,background:"neutral0"},A&&o.default.createElement(f.Box,{paddingBottom:4},o.default.createElement(p.Status,{variant:"danger"},o.default.createElement(s.Typography,null,A))),L&&o.default.createElement(f.Box,{paddingBottom:4},o.default.createElement(p.Status,{variant:"success"},o.default.createElement(s.Typography,null,L))),o.default.createElement(s.Typography,{variant:"beta"},"Step 1: Upload source file"),o.default.createElement(y.FileField,null,o.default.createElement("input",{id:"source",name:"source",accept:".json",type:"file",onChange:function(e){e.target.files&&e.target.files.length>0&&(F(null),x(e.target.files[0]))}})),B?o.default.createElement(h.default,{data:B}):o.default.createElement(y.FormAction,null,o.default.createElement(d.Button,{disabled:b,variant:"secondary",onClick:function(){I(null),S?(O(!0),(0,g.readLocalFile)(S,JSON.parse).then(F).catch((function(e){I("Something wrong when uploading the file, please check the file and try again."),n.error(e)})).finally((function(){O(!1)}))):I("Please choose a source file first.")}},b?"Please Wait...":"Upload"))),o.default.createElement(f.Box,{padding:4,margin:4,shadow:"filterShadow",hasRadius:!0,background:"neutral0"},o.default.createElement(s.Typography,{variant:"beta"},"Step 2: Choose target content type"),o.default.createElement(c.Select,{name:"targetContentType",id:"target-content-type",value:P,onChange:function(e){k(e)}},a.map((function(e){return o.default.createElement(c.Option,{value:e.value,key:e.value},e.label)}))),o.default.createElement(y.FormAction,null,o.default.createElement(d.Button,{disabled:b,onClick:function(){if(P)if(B){var e=(0,v.find)(t,(function(e){return e.uid===P}));O(!0),(0,E.importData)({targetModel:e.uid,source:B,kind:(0,v.get)(e,"schema.kind")}).then((function(){I(null),U("Import succeeded!")})).catch((function(e){n.log(e),U(null),I("Import content failed: "+e.message)})).finally((function(){O(!1)}))}else I("Please choose a source file first.");else I("Please select a target content type!")},variant:"default"},b?"Please Wait...":"Import"))))};t.default=O},46568:(e,t,a)=>{var n=a(95318),r=a(50008);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=n(a(87757)),u=n(a(48926)),o=n(a(63038)),c=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!==typeof e)return{default:e};var a=p(t);if(a&&a.has(e))return a.get(e);var n={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var o=l?Object.getOwnPropertyDescriptor(e,u):null;o&&(o.get||o.set)?Object.defineProperty(n,u,o):n[u]=e[u]}n.default=e,a&&a.set(e,n);return n}(a(53547)),i=a(35395),f=(n(a(27880)),n(a(7094))),d=a(62988);function p(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(p=function(e){return e?a:t})(e)}var s=function(){var e=(0,c.useState)([]),t=(0,o.default)(e,2),a=t[0],n=t[1];return(0,c.useEffect)((function(){function e(){return e=(0,u.default)(l.default.mark((function e(){var t;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,d.getModels)();case 2:t=e.sent,n(t);case 4:case"end":return e.stop()}}),e)}))),e.apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),c.default.createElement("div",null,c.default.createElement(i.BaseHeaderLayout,{title:"Import Content",subtitle:"Import data from file",as:"h2"}),c.default.createElement(f.default,{models:a}))},m=(0,c.memo)(s);t.default=m},54958:(e,t,a)=>{var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.FormAction=t.FileField=void 0;var r=n(a(78384)),l=r.default.div.withConfig({displayName:"ui-components__FormAction",componentId:"sc-1h2vwft-0"})(["margin-top:1.2rem;"]);t.FormAction=l;var u=r.default.div.withConfig({displayName:"ui-components__FileField",componentId:"sc-1h2vwft-1"})(["border:1px dashed #efefef;padding:1.2rem;marginTop:1rem;"]);t.FileField=u},16237:(e,t,a)=>{var n=a(95318),r=a(50008);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=n(a(87757)),u=n(a(48926)),o=n(a(63038)),c=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!==typeof e)return{default:e};var a=b(t);if(a&&a.has(e))return a.get(e);var n={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var o=l?Object.getOwnPropertyDescriptor(e,u):null;o&&(o.get||o.set)?Object.defineProperty(n,u,o):n[u]=e[u]}n.default=e,a&&a.set(e,n);return n}(a(53547)),i=a(2632),f=a(64459),d=a(94117),p=a(20779),s=a(35395),m=a(33483),v=a(62988),y=a(54958),g=a(36816),h=a(96486),E=a(82419);function b(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(b=function(e){return e?a:t})(e)}var O=function(){var e=(0,c.useState)([]),t=(0,o.default)(e,2),a=t[0],n=t[1],r=(0,c.useState)(!1),b=(0,o.default)(r,2),O=b[0],j=b[1],w=(0,c.useState)(),P=(0,o.default)(w,2),k=P[0],M=P[1],_=(0,c.useState)(null),S=(0,o.default)(_,2),x=S[0],T=S[1],C=(0,c.useState)(null),B=(0,o.default)(C,2),F=B[0],D=B[1],W=(0,h.map)(a,g.convertModelToOption);(0,c.useEffect)((function(){function e(){return e=(0,u.default)(l.default.mark((function e(){var t;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,v.getModels)();case 2:t=e.sent,n(t),M(t[0].uid);case 5:case"end":return e.stop()}}),e)}))),e.apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]);return c.default.createElement("div",null,c.default.createElement(s.BaseHeaderLayout,{title:"Utilities",subtitle:"Additional features",as:"h2"}),x&&c.default.createElement(d.Box,{paddingBottom:4},c.default.createElement(p.Status,{variant:"danger"},c.default.createElement(m.Typography,null,x))),F&&c.default.createElement(d.Box,{paddingBottom:4},c.default.createElement(p.Status,{variant:"success"},c.default.createElement(m.Typography,null,F))),c.default.createElement(m.Typography,{variant:"beta"},"Delete all content of a type"),c.default.createElement(d.Box,{paddingTop:4},c.default.createElement(m.Typography,{variant:"epsilon",lineHeight:6},"Target Content Type"),c.default.createElement(i.Select,{name:"targetContentType",id:"target-content-type",value:k,onChange:function(e){M(e)}},W.map((function(e){return c.default.createElement(i.Option,{key:e.value,value:e.value},e.label)})))),c.default.createElement(y.FormAction,null,c.default.createElement(f.Button,{disabled:O,onClick:function(){return j(!0),T(null),D(null),(0,E.deleteAll)(k).then((function(e){D("Successfully deleted ".concat(e.count," records."))})).catch((function(e){T("Delete content failed: ".concat(e.message))})).finally((function(){j(!1)}))},primary:!0},O?"Please Wait...":"Delete All Content")))},j=(0,c.memo)(O);t.default=j},38973:(e,t,a)=>{var n=a(50008);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!==typeof e)return{default:e};var a=l(t);if(a&&a.has(e))return a.get(e);var r={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var c=u?Object.getOwnPropertyDescriptor(e,o):null;c&&(c.get||c.set)?Object.defineProperty(r,o,c):r[o]=e[o]}r.default=e,a&&a.set(e,r);return r}(a(53547));function l(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(l=function(e){return e?a:t})(e)}var u=function(){return r.default.createElement("div",null,r.default.createElement("h1",null,"Welcom"),r.default.createElement("p",null,"Happy coding"))},o=(0,r.memo)(u);t.default=o},82419:(e,t,a)=>{var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.importData=t.deleteAll=void 0;var r=a(68547),l=n(a(27880));t.importData=function(e){return(0,r.request)("/".concat(l.default,"/import"),{method:"POST",body:e})};t.deleteAll=function(e){return(0,r.request)("/".concat(l.default,"/delete-all"),{method:"POST",body:{targetModelUid:e}})}},62988:(e,t,a)=>{var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.getModels=t.fetchAll=void 0;var r=a(68547),l=a(96486),u=n(a(27880));t.getModels=function(){return(0,r.request)("/content-type-builder/content-types",{method:"GET"}).then((function(e){return(0,l.filter)(e.data,(function(e){return!e.plugin}))})).catch((function(){return[]}))};t.fetchAll=function(e){return(0,r.request)("/".concat(u.default,"/fetch-content?uid=").concat(e))}},36816:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.convertModelToOption=void 0;t.convertModelToOption=function(e){return{label:e.schema.displayName,value:e.uid}}},37863:(e,t,a)=>{var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.convertToCsv=void 0;var r=n(a(50008)),l=function(e,t){return e.map((function(e){return u(t[e])})).join(",")},u=function(e){return"string"===typeof e?e.replace(/\n/g," "):e};t.convertToCsv=function(e){if(!e||"object"!==(0,r.default)(e))return"";var t=Array.isArray(e),a=t?Object.keys(e[0]):Object.keys(e),n=t?e.map((function(e){return l(a,e)})).join("\n"):l(a,e);return[a.join(","),n].join("\n")}},90384:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.readLocalFile=void 0;t.readLocalFile=function(e,t){var a=new FileReader;return new Promise((function(n,r){a.onload=function(e){var a=t&&"function"===typeof t?t(e.target.result):e.target.result;n(a)},a.onerror=r,a.readAsText(e)}))}},48599:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getUrl=void 0;t.getUrl=function(e,t){return t?"/plugins/".concat(e,"/").concat(t):"/plugins/".concat(e)}}}]);